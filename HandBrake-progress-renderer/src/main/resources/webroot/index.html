<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>101</title>

  <script src="http://cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
  <script src='/static/js/vertx-eventbus.js'></script>
<!--  <script src='/static/vertx-web-3.8.3-client.js'></script>-->

  <script>
      var options = {
          vertxbus_reconnect_attempts_max: Infinity, // Max reconnect attempts
          vertxbus_reconnect_delay_min: 1000, // Initial delay (in ms) before first reconnect attempt
          vertxbus_reconnect_delay_max: 5000, // Max delay (in ms) between reconnect attempts
          vertxbus_reconnect_exponent: 2, // Exponential backoff factor
          vertxbus_randomization_factor: 0.5 // Randomization factor between 0 and 1
      };
      var eb = new EventBus('http://localhost:80/event-bus', options);
      eb.enableReconnect(true);

      eb.onopen = function() {
          console.log("onopen");
          // set a handler to receive a message
          eb.registerHandler('encoding.update', function(error, message) {
              // console.log('received a message: ' + JSON.stringify(message));
              console.log('Message type: ' + message.type);
              console.log('Message address: ' + message.address);
              console.log('Message body: ' + message.body);
          });
      };

  </script>
</head>
<body>
  Joepie
</body>
</html>
